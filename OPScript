local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

local CurrentVersion = "Infinite Mining Incremental v1"

local Window = Fluent:CreateWindow({
    Title = CurrentVersion,
    SubTitle = "by ngw12345",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = true, -- The blur may be detectable, setting this to false disables blur entirely
    Theme = "Darker",
    MinimizeKey = Enum.KeyCode.LeftControl -- Used when theres no MinimizeKeybind
})

-- Local Var List

-- Fluent provides Lucide Icons, they are optional
local Tabs = {
    Teleports = Window:AddTab({ Title = "Teleports", Icon = "rocket" }),
    AutoFarm = Window:AddTab({ Title = "Automation", Icon = "crown" }),
    Settings = Window:AddTab({ Title = "Settings", Icon = "settings" })
}

local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

SaveManager:SetLibrary(Fluent)
InterfaceManager:SetLibrary(Fluent)

InterfaceManager:BuildInterfaceSection(Tabs.Settings)
SaveManager:BuildConfigSection(Tabs.Settings)

Window:SelectTab(1)

local Toggle = Tabs.AutoFarm:AddToggle("AutoFarmToggle", 
{
    Title = "Auto Farm (Clone Hitbox)",
    Description = "Auto swings using manual remote firing with cloned hitbox",
    Default = false,
    Callback = function(state)
        if state then
            print("AutoFarm On")
            getgenv().AutoFarmRunning = true

            task.spawn(function()
                local Players = game:GetService("Players")
                local player = Players.LocalPlayer
                local remote = game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvents"):WaitForChild("WeaponSwingEvent")

                local function findOriginalHitbox()
                    local charFolder = workspace:FindFirstChild(player.Name)
                    if charFolder then
                        local children = charFolder:GetChildren()
                        if #children > 0 then
                            local last = children[#children]
                            return last:FindFirstChild("Hitbox")
                        end
                    end
                    return nil
                end

                while getgenv().AutoFarmRunning do
                    local originalHitbox = findOriginalHitbox()
                    if originalHitbox and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                        local hrp = player.Character.HumanoidRootPart
                        local clone = originalHitbox:Clone()

                        clone.Name = "AutoHitbox"
                        clone.Anchored = true
                        clone.CanCollide = false
                        clone.Size = Vector3.new(25, 25, 25)
                        clone.CFrame = hrp.CFrame * CFrame.new(0, 0, -10)
                        clone.Parent = workspace

                        -- Fire swing events
                        remote:FireServer("SwingStart")
                        remote:FireServer("HitboxStart")

                        -- Jiggle the clone in place for better coverage
                        local startTime = tick()
                        local jiggleAmount = 1
                        while tick() - startTime < 0.75 do
                            clone.CFrame = hrp.CFrame * CFrame.new(0, 0, -10 + math.random(-jiggleAmount, jiggleAmount))
                            task.wait(0.05)
                        end

                        -- End swing and cleanup
                        remote:FireServer("HitboxEnd")
                        remote:FireServer("SwingEnd")

                        clone:Destroy()
                    end

                    task.wait(0.15)
                end
            end)
        else
            print("AutoFarm Off")
            getgenv().AutoFarmRunning = false
        end
    end 
})
